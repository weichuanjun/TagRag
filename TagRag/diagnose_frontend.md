# 前端连接问题诊断指南

## 当前状态检查

### 1. 服务状态
- ✅ 后端服务: `localhost:8000` - 运行正常
- ✅ 前端服务: `localhost:3000` - 运行正常
- ✅ API代理: 工作正常

### 2. 可用的知识库
- ID: 1, 名称: "AI歯周病", 文档数: 222
- ID: 2, 名称: "java-source", 文档数: 0

### 3. 可用的代码仓库
- ID: 1, 名称: "source"
- ID: 2, 名称: "ai-backend"
- ID: 3, 名称: "示例代码库"
- ID: 4, 名称: "xlhc-chat"
- ID: 5, 名称: "xlhc-common"

## 使用步骤

### 1. 访问前端页面
在浏览器中打开: `http://localhost:3000`

### 2. 选择知识库
1. 点击左侧菜单的"智能问答"
2. 在页面顶部选择知识库下拉框
3. 选择一个知识库（推荐选择"AI歯周病"，因为它有文档数据）

### 3. 发送消息
1. 在输入框中输入问题
2. 点击发送按钮或按回车键

## 常见问题排查

### 问题1: 页面无法加载
**症状**: 浏览器显示无法连接到服务器
**解决方案**: 
- 确认前端服务正在运行: `lsof -i :3000`
- 如果未运行，启动前端: `cd TagRag/frontend && npm start`

### 问题2: 页面加载但没有响应
**症状**: 页面显示但点击按钮无反应
**解决方案**:
- 打开浏览器开发者工具 (F12)
- 查看Console标签页是否有JavaScript错误
- 查看Network标签页是否有API请求失败

### 问题3: 无法选择知识库
**症状**: 知识库下拉框为空或无法选择
**解决方案**:
- 刷新页面
- 检查浏览器控制台是否有API错误
- 确认后端服务正在运行: `lsof -i :8000`

### 问题4: 发送消息后无响应
**症状**: 点击发送后没有回答
**解决方案**:
- 确认已选择知识库
- 检查浏览器控制台的错误信息
- 查看Network标签页的API请求状态

## 测试API连接

如果怀疑API连接有问题，可以访问测试页面:
`http://localhost:3000/test`

这个页面会测试所有主要的API端点并显示结果。

## 调试信息

### 检查服务状态
```bash
# 检查后端
lsof -i :8000

# 检查前端
lsof -i :3000

# 测试API
curl http://localhost:8000/
curl http://localhost:3000/code/repositories
```

### 查看日志
```bash
# 后端日志
tail -f TagRag/backend/app.log

# 前端日志 (在终端中查看)
# 前端启动时会显示编译和错误信息
```

## 联系支持

如果以上步骤都无法解决问题，请提供以下信息：
1. 浏览器控制台的错误信息
2. Network标签页的API请求状态
3. 后端日志中的错误信息
4. 具体的操作步骤和期望结果 